{% extends "base.html" %}
{% block title %}Rooms{% endblock %}
{% block nav_rooms %}active{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Rooms</h1>
    <button class="btn btn-primary btn-sm" onclick="document.getElementById('add-room-modal').style.display='flex'">+ Add Room</button>
</div>

{% if vm.rooms %}
<div class="card-grid">
    {% for r in vm.rooms %}
    <a href="/rooms/{{ r.room.id }}" class="card room-card">
        <div class="card-placeholder">
            <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M9 3v18"/></svg>
        </div>
        <div class="card-title">{{ r.room.name }}</div>
        <div class="card-subtitle">Floor {{ r.room.floor }}</div>
        <div class="room-stats">
            <span>{{ r.item_count }} items</span>
            <span class="value-display">${{ "%.0f"|format(r.total_value) }}</span>
        </div>
    </a>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="currentColor" stroke-width="1.5"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M3 9h18M9 3v18"/></svg>
    <p>No rooms added yet. Start by adding the rooms in your home.</p>
    <button class="btn btn-primary" onclick="document.getElementById('add-room-modal').style.display='flex'">Add Your First Room</button>
</div>
{% endif %}

<!-- Add Room Modal -->
<div id="add-room-modal" class="modal-overlay" style="display:none" onclick="if(event.target===this)this.style.display='none'">
    <div class="modal-content">
        <h2 class="mb-16">Add New Room</h2>
        <form method="POST" action="/rooms">
            <div class="form-group">
                <label for="name">Room Name</label>
                <input type="text" id="name" name="name" class="form-control" placeholder="e.g., Living Room" required>
            </div>
            <div class="form-group">
                <label for="description">Description (optional)</label>
                <textarea id="description" name="description" class="form-control" placeholder="Any notes about this room"></textarea>
            </div>
            <div class="form-group">
                <label for="floor">Floor</label>
                <select id="floor" name="floor" class="form-control">
                    <option value="0">Basement</option>
                    <option value="1" selected>Ground Floor</option>
                    <option value="2">Second Floor</option>
                    <option value="3">Third Floor</option>
                </select>
            </div>
            <div class="flex gap-8 mt-16">
                <button type="button" class="btn btn-secondary" style="flex:1" onclick="this.closest('.modal-overlay').style.display='none'">Cancel</button>
                <button type="submit" class="btn btn-primary" style="flex:1">Add Room</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
